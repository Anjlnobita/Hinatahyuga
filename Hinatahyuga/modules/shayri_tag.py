from Hinatahyuga import pbot as app
import asyncio
import random
from pyrogram import Client, filters
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.errors import UserNotParticipant
from pyrogram.types import ChatPermissions

spam_chats = []

EMOJI = [ "ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹",
          "ğŸ§šğŸŒ¸ğŸ§‹ğŸ¬ğŸ«–",
          "ğŸ¥€ğŸŒ·ğŸŒ¹ğŸŒºğŸ’",
          "ğŸŒ¸ğŸŒ¿ğŸ’®ğŸŒ±ğŸŒµ",
          "â¤ï¸ğŸ’šğŸ’™ğŸ’œğŸ–¤",
          "ğŸ’“ğŸ’•ğŸ’ğŸ’—ğŸ’–",
          "ğŸŒ¸ğŸ’ğŸŒºğŸŒ¹ğŸ¦‹",
          "ğŸ”ğŸ¦ªğŸ›ğŸ²ğŸ¥—",
          "ğŸğŸ“ğŸ’ğŸ‘ğŸŒ¶ï¸",
          "ğŸ§‹ğŸ¥¤ğŸ§‹ğŸ¥›ğŸ·",
          "ğŸ¬ğŸ­ğŸ§ğŸ‚ğŸ¡",
          "ğŸ¨ğŸ§‰ğŸºâ˜•ğŸ»",
          "ğŸ¥ªğŸ¥§ğŸ¦ğŸ¥ğŸš",
          "ğŸ«–â˜•ğŸ¹ğŸ·ğŸ¥›",
          "â˜•ğŸ§ƒğŸ©ğŸ¦ğŸ™",
          "ğŸğŸŒ¾ğŸ’®ğŸ‚ğŸŒ¿",
          "ğŸŒ¨ï¸ğŸŒ¥ï¸â›ˆï¸ğŸŒ©ï¸ğŸŒ§ï¸",
          "ğŸŒ·ğŸµï¸ğŸŒ¸ğŸŒºğŸ’",
          "ğŸ’®ğŸŒ¼ğŸŒ»ğŸ€ğŸ",
          "ğŸ§ŸğŸ¦¸ğŸ¦¹ğŸ§™ğŸ‘¸",
          "ğŸ§…ğŸ ğŸ¥•ğŸŒ½ğŸ¥¦",
          "ğŸ·ğŸ¹ğŸ­ğŸ¨ğŸ»â€â„ï¸",
          "ğŸ¦‹ğŸ‡ğŸ€ğŸˆğŸˆâ€â¬›",
          "ğŸŒ¼ğŸŒ³ğŸŒ²ğŸŒ´ğŸŒµ",
          "ğŸ¥©ğŸ‹ğŸğŸˆğŸ‡",
          "ğŸ´ğŸ½ï¸ğŸ”ªğŸ¶ğŸ¥ƒ",
          "ğŸ•ŒğŸ°ğŸ©â›©ï¸ğŸ©",
          "ğŸ‰ğŸŠğŸˆğŸ‚ğŸ€",
          "ğŸª´ğŸŒµğŸŒ´ğŸŒ³ğŸŒ²",
          "ğŸ„ğŸ‹ğŸğŸ‘ğŸ",
          "ğŸ¦…ğŸ¦œğŸ•Šï¸ğŸ¦¤ğŸ¦¢",
          "ğŸ¦¤ğŸ¦©ğŸ¦šğŸ¦ƒğŸ¦†",
          "ğŸ¬ğŸ¦­ğŸ¦ˆğŸ‹ğŸ³",
          "ğŸ”ğŸŸğŸ ğŸ¡ğŸ¦",
          "ğŸ¦©ğŸ¦€ğŸ¦‘ğŸ™ğŸ¦ª",
          "ğŸ¦ğŸ¦‚ğŸ•·ï¸ğŸ•¸ï¸ğŸš",
          "ğŸ¥ªğŸ°ğŸ¥§ğŸ¨ğŸ¨",
          " ğŸ¥¬ğŸ‰ğŸ§ğŸ§‡",
        ]
        ####

SHAYRI = [ " **ğŸ¥€Bahut aacha lagta hai tujhe satana Aur fir pyar se tujhe manana.ğŸ¥€** ",
           " **ğŸ¥€Meri zindagi Meri jaan ho tum Mere sukoon ka Dusra naam ho tum.ğŸ¥€** ",
           "** ğŸ¥€**Tum Meri Wo Khushi Ho Jiske Bina, Meri Saari Khushi Adhuri Lagti Ha.ğŸ¥€** ",
           " **ğŸ¥€Kash woh din jldi aaye Jb tu mere sath 7 feron me bndh jaye.ğŸ¥€** ",
           " **ğŸ¥€apna hath mere dil pr rakh do aur apna dil mere naam kar do.ğŸ¥€** ",
           " **ğŸ¥€Mahadev na koi gadi na koi bangla chahiye salamat rhe mera pyar bas yahi dua chahiye.ğŸ¥€** ",
           " **ğŸ¥€Fikr to hogi na tumhari ikloti mohabbat ho tum meri.ğŸ¥€** ",
           " **ğŸ¥€suno jaanu aap sirf kitchen sambhal lena ap ko sambhlne ke liye me hun naa.ğŸ¥€** ",
           " **ğŸ¥€So bat ki ek bat mujhe chahiye bas tera sath.ğŸ¥€** ",
           " **ğŸ¥€Bahut muskilon se paya hai tumhe Ab khona ni chahte ki tumhare they tumhare hai ab kisi or k hona nhi chahte.ğŸ¥€** ",
           " **ğŸ¥€Baby baten to roj karte haichalo aaj romance karte hai..ğŸ¥€** ",
           " **ğŸ¥€subha sham tujhe yad karte hai hum aur kya batayen ki tumse kitna pyar karte hai hum.ğŸ¥€** ",
           " **ğŸ¥€Kisi se dil lag jane ko mohabbat nahi kehte jiske nina dil na lage use mohabbat kehte hai.ğŸ¥€** ",
           " **ğŸ¥€mere dil ke lock ki chabi ho tum kya batayen jaan mere jeene ki eklauti wajah ho tum..ğŸ¥€** ",
           " **ğŸ¥€Hum apki har cheez se pyar kar lenge apki har baat par etvar kar lenge bas ek bar keh do ki tum sirf mere ho hum zindagi bhar apka intzaar kar lenge..ğŸ¥€** ",
           " **ğŸ¥€Mohabbat kabhi special logo se nahi hoti jisse bhi hoti hai wahi special ban jate hai,.ğŸ¥€**",
           " **ğŸ¥€Tu meri jaan hai isme koi shak nahi tere alawa mujhe par kisi aur ka hak nhi..ğŸ¥€** ",
           " **ğŸ¥€Pehli mohabbat meri hum jaan na sake pyar kya hota hai hum pehchan na sake humne unhe dil me basa liya is kadar ki jab chaha unhe dil se nikal na sake.ğŸ¥€** ",
           " **ğŸ¥€khud nahi janti vo kitni pyari hai jan hai hamari par jan se jyda payari hai duriya ke hone se frak nahi pdta vo kal bhe hamari the or aaj bhe hamari hai.ğŸ¥€** ",
           " **ğŸ¥€Chupke Se Aakar Iss Dil Mein Utar Jate Ho, Saanso Mein Meri Khushbu BanKe Bikhar Jate Ho,Kuchh Yun Chala Hai Tere Ishq Ka Jadoo, Sote-Jagte Tum Hi Tum Najar Aate Ho..ğŸ¥€** ",
           " **ğŸ¥€Pyar karna sikha hai naftaro ka koi thor nahi bas tu hi tu hai is dil me dusra koi aur nahi hai.ğŸ¥€** ",
           " **ğŸ¥€Rab se apki khushiyan mangte hai duao me apki hansi mangte hai sochte hai apse kya mange chalo apse umar bhar ki mohabbat mangte hai..ğŸ¥€** ",
           " **ğŸ¥€kash mere hoth tere hontho ko chu jayen dekhun jaha bas teri hi chehra nazar aaye ho jayen humara rishta kuch easa hothon ke sath humare dil bhi jud jaye.ğŸ¥€** ",
           " **ğŸ¥€Aaj mujhe ye batane ki izazat de do, aaj mujhe ye sham sajane ki izazat de do, apne ishq me mujhe ked kr lo aaj jaan tum par lutane ki izazat de do..ğŸ¥€** ",
           " **ğŸ¥€Jane log mohabbat ko kya kya naam dete hai hum to tere naam ko hi mohabbat kehte hai..ğŸ¥€** ",
           " **ğŸ¥€Dekh Ke Hame Wo Sir Jhukate Hai Bula Ke Mahfhil Me Najar Churate Hai Nafrat Hai Hamse To Bhi Koei Bat Nhi Par Gairo Se Mil Ke Dil Kyo Jalate Ho.ğŸ¥€** ",
           " **ğŸ¥€Tere bina tut kar bikhar jeynge tum mil gaye to gulshan ki tarha khil jayenge tum na mile to jite ji hi mar jayenge tumhe jo pa liya to mar kar bhi ji jayenge..ğŸ¥€** ",
           " **ğŸ¥€Sanam teri kasam jese me zaruri hun teri khushi ke liye tu zaruri hai meri zindagi ke liye.ğŸ¥€** ",
           " **ğŸ¥€Tumharfe gusse par mujhe pyar aaya hai is bedard duniya me koi to hai jisne mujhe pure hakk se dhamkaya hai.ğŸ¥€** ",
           " **ğŸ¥€Palkon se Aankho ki hifajat hoti hai dhakad dil ki Aamanat hoti hai, ye rishta bhi bada pyara hota hai, kabhi chahat to kabhi shikayat hoti hai.ğŸ¥€** ",
           " **ğŸ¥€Muhabbt Ko Hab Log Khuda Mante Hai, Payar Karne Walo Ko Kyu Bura Mante Hai,Jab Jamana Hi Patthr Dil Hai,Fhir Patthr Se Log Kyu Duaa Magte Hai.ğŸ¥€** ",
           " **ğŸ¥€Hua jab ishq ka ehsaas unhe akar wo pass humare sara din rate rahe, hum bhi nikale khudgarj itne yaro ki ood kar kafan ankhe band krke sote rhe.ğŸ¥€** ",
           " **ğŸ¥€Dil Ke Kone Se Ek Aawaj Aati Hai, Hame Har Pal Uaski Yad Aati Hai, Dil Puchhta Hai Bar Bar Hamse Ke, Jitna Ham Yad Karte Hai Uanhe, Kya Uanhe Bhi Hamari Yad Aati Hai,ğŸ¥€** ",
           " **ğŸ¥€Kabhi Lafz Bhool Jaaun Kabhi Baat Bhool Jaaun, Tujhe Iss Kadar Chahun Ki Apni Jaat Bhool Jaaun, Kabhi Uthh Ke Tere Paas Se Jo Main Chal Dun, Jaate Huye Khud Ko Tere Paas Bhool Jaaun..ğŸ¥€** ",
           " **ğŸ¥€Aaina dekhoge to meri yad ayegi sath guzari wo mulakat yad ayegi pal bhar ke waqt thahar jayega jab apko meri koi bat yad ayegi.ğŸ¥€** ",
           " **ğŸ¥€Pyar kiya to unki mohabbat nazar aai dard hua to palke unki bhar aai do dilon ki dhadkan me ek baat nazar aai dil to unka dhadka par awaz dil ki aai.ğŸ¥€** ",
           " **ğŸ¥€Kai chehre lekar log yahn jiya karte hai hum to bas ek hi chehre se pyar karte hai na chupaya karo tum is chehre ko kyuki hum ise dekh ke hi jiya karte hai.ğŸ¥€** ",
           " **ğŸ¥€Sabke bf ko apni gf se baat karke nind aajati hai aur mere wale ko mujhse lade bina nind nhi aati.ğŸ¥€** ",
           " **ğŸ¥€Sacha pyar kaha kisi ke nasib me hota hai esa pyar kahan is duniya me kisi ko nasib hota hai.ğŸ¥€** " ]

# Command



@app.on_message(filters.command(["shayari","shtag"], prefixes=["/", "@", "#"]))
async def mentionall(client, message):
    chat_id = message.chat.id
    if message.chat.type == ChatType.PRIVATE:
        return await message.reply("ğ“ğ¡ğ¢ğ¬ ğ‚ğ¨ğ¦ğ¦ğšğ§ğ ğğ§ğ¥ğ² ğ…ğ¨ğ« ğ†ğ«ğ¨ğ®ğ©ğ¬.")

    is_admin = False
    try:
        participant = await client.get_chat_member(chat_id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in (
            ChatMemberStatus.ADMINISTRATOR,
            ChatMemberStatus.OWNER
        ):
            is_admin = True
    if not is_admin:
        return await message.reply("ğ˜ğ¨ğ® ğ€ğ«ğ ğğ¨ğ­ ğ€ğğ¦ğ¢ğ§ ğğšğ›ğ², ğğ§ğ¥ğ² ğ€ğğ¦ğ¢ğ§ğ¬ ğ‚ğšğ§ . ")

    if message.reply_to_message and message.text:
        return await message.reply("/shayari ğ“ğ²ğ©ğ ğ‹ğ¢ğ¤ğ ğ“ğ¡ğ¢ğ¬ / ğ‘ğğ©ğ¥ğ² ğ€ğ§ğ² ğŒğğ¬ğ¬ğšğ ğ ğğğ±ğ­ ğ“ğ¢ğ¦ğ ")
    elif message.text:
        mode = "text_on_cmd"
        msg = message.text
    elif message.reply_to_message:
        mode = "text_on_reply"
        msg = message.reply_to_message
        if not msg:
            return await message.reply("/shayari  ğ“ğ²ğ©ğ ğ‹ğ¢ğ¤ğ ğ“ğ¡ğ¢ğ¬ / ğ‘ğğ©ğ¥ğ² ğ€ğ§ğ² ğŒğğ¬ğ¬ğšğ ğ ğğğ±ğ­ ğ“ğ¢ğ¦ğ ...")
    else:
        return await message.reply("/shayari  ğ“ğ²ğ©ğ ğ‹ğ¢ğ¤ğ ğ“ğ¡ğ¢ğ¬ / ğ‘ğğ©ğ¥ğ² ğ€ğ§ğ² ğŒğğ¬ğ¬ğšğ ğ ğğğ±ğ­ ğ“ğ¢ğ¦ğ ..")
    if chat_id in spam_chats:
        return await message.reply("ğğ¥ğğšğ¬ğ ğ€ğ­ ğ…ğ¢ğ«ğ¬ğ­ ğ’ğ­ğ¨ğ© ğ‘ğ®ğ§ğ§ğ¢ğ§ğ  ğğ«ğ¨ğœğğ¬ğ¬ ...")
    spam_chats.append(chat_id)
    usrnum = 0
    usrtxt = ""
    async for usr in client.get_chat_members(chat_id):
        if not chat_id in spam_chats:
            break
        if usr.user.is_bot:
            continue
        usrnum += 1
        usrtxt += f"[{usr.user.first_name}](tg://user?id={usr.user.id}) "

        if usrnum == 1:
            if mode == "text_on_cmd":
                txt = f"{usrtxt} {random.choice(SHAYRI)}"
                await client.send_message(chat_id, txt)
            elif mode == "text_on_reply":
                await msg.reply(f"[{random.choice(EMOJI)}](tg://user?id={usr.user.id})")
            await asyncio.sleep(4)
            usrnum = 0
            usrtxt = ""
    try:
        spam_chats.remove(chat_id)
    except:
        pass


#

@app.on_message(filters.command(["shstop", "shayarioff" ,"cancel"]))
async def cancel_spam(client, message):
    if not message.chat.id in spam_chats:
        return await message.reply("ğ‚ğ®ğ«ğ«ğğ§ğ­ğ¥ğ² ğˆ'ğ¦ ğğ¨ğ­ ..")
    is_admin = False
    try:
        participant = await client.get_chat_member(message.chat.id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in (
            ChatMemberStatus.ADMINISTRATOR,
            ChatMemberStatus.OWNER
        ):
            is_admin = True
    if not is_admin:
        return await message.reply("ğ˜ğ¨ğ® ğ€ğ«ğ ğğ¨ğ­ ğ€ğğ¦ğ¢ğ§ ğğšğ›ğ², ğğ§ğ¥ğ² ğ€ğğ¦ğ¢ğ§ğ¬ ğ‚ğšğ§ ğ“ğšğ  ğŒğğ¦ğ›ğğ«ğ¬.")
    else:
        try:
            spam_chats.remove(message.chat.id)
        except:
            pass
        return await message.reply("â™¦ OFFFFFFFFFâ™¦")